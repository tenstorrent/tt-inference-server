# Locust Load Testing

## Setup Environment

In your Python environment with model dependencies installed, install the Locust utility:

```bash
pip install -r requirements.txt
```

## Test Types

### Static Test

Run a basic test with a single user and a predefined input prompt.

- Prompt: "What is in Austin Texas?"
  - Prompt Length: 7 tokens
  - Output Length: 128 tokens

Command to run the static test:

```bash
locust --config locust_static.conf
```

### Dynamic Test

Run a dynamic test using a dataset of variable input prompts generated by [generate_prompts](./../utils/prompt_generation.py#250).

Command to run the dynamic test:

```bash
locust --config locust_dynamic.conf
```

## Test Configuration

You can configure Locust tests using `.conf` files. The key configurations to modify are:

- **`users`**: Maximum number of concurrent users.
- **`spawn-rate`**: Number of users spawned per second.
- **`run-time`**: Total duration of the test (e.g., `300s`, `20m`, `3h`, `1h30m`, etc.).

For more details, see the [Locust configuration guide](https://docs.locust.io/en/2.25.0/configuration.html).

### Example

To run a test with 32 users, all launched simultaneously, for a duration of 3 minutes, set the parameters:

```bash
users = 32
spawn-rate = 32
run-time = 3m
```
